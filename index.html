<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O Peixinho que Queria Brincar - Edição Especial</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bubblegum+Sans&display=swap');

        :root {
            --water-bg: #a2d2ff;
            --coral-btn: #ffafbd;
            --text-color: #444;
            --paper-color: #fdfaf0;
        }

        body {
            margin: 0;
            background-color: var(--water-bg);
            font-family: 'Bubblegum Sans', cursive;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* --- ANIMAÇÃO DE BOLHAS AO FUNDO --- */
       .wrapper { 
    height: 100%; 
    width: 100%; 
    position: absolute; 
    top: 0; 
    left: 0; 
    z-index: 0; 
}

.wrapper div { 
    border: 2px solid rgba(255, 255, 255, 0.8); 
    border-radius: 50%; 
    position: absolute; 
    bottom: -100px; /* Começam abaixo da tela */
    animation: animate 5s linear infinite; 
}

@keyframes animate {
    0% { transform: translateY(0) scale(0.5); opacity: 0; }
    10% { opacity: 1; }
    90% { opacity: 0.8; }
    100% { transform: translateY(-120vh) scale(1.5); opacity: 0; }
}

/* Bolhas com tamanhos e velocidades diferentes para intensidade */
.wrapper div:nth-child(1) { width: 40px; height: 40px; left: 10%; animation-duration: 6s; animation-delay: 0s; }
.wrapper div:nth-child(2) { width: 20px; height: 20px; left: 25%; animation-duration: 4s; animation-delay: 1s; }
.wrapper div:nth-child(3) { width: 50px; height: 50px; left: 40%; animation-duration: 8s; animation-delay: 2s; }
.wrapper div:nth-child(4) { width: 15px; height: 15px; left: 55%; animation-duration: 3s; animation-delay: 0.5s; }
.wrapper div:nth-child(5) { width: 60px; height: 60px; left: 70%; animation-duration: 7s; animation-delay: 3s; }
.wrapper div:nth-child(6) { width: 30px; height: 30px; left: 85%; animation-duration: 5s; animation-delay: 1.5s; }
.wrapper div:nth-child(7) { width: 25px; height: 25px; left: 15%; animation-duration: 4.5s; animation-delay: 2.5s; }
.wrapper div:nth-child(8) { width: 45px; height: 45px; left: 60%; animation-duration: 6.5s; animation-delay: 0.2s; }
.wrapper div:nth-child(9) { width: 10px; height: 10px; left: 80%; animation-duration: 3.5s; animation-delay: 4s; }
.wrapper div:nth-child(10) { width: 55px; height: 55px; left: 35%; animation-duration: 9s; animation-delay: 1s; }
.wrapper div:nth-child(11) { width: 20px; height: 20px; left: 50%; animation-duration: 4s; animation-delay: 5s; }
.wrapper div:nth-child(12) { width: 35px; height: 35px; left: 95%; animation-duration: 5.5s; animation-delay: 0.8s; }
.wrapper div:nth-child(13) { width: 15px; height: 15px; left: 5%; animation-duration: 3.2s; animation-delay: 2s; }
.wrapper div:nth-child(14) { width: 50px; height: 50px; left: 75%; animation-duration: 7.5s; animation-delay: 3.5s; }
.wrapper div:nth-child(15) { width: 25px; height: 25px; left: 45%; animation-duration: 4.8s; animation-delay: 0.1s; }

/* Adicionando um brilho extra no centro das bolhas */
.dot { 
    height: 30%; width: 30%; 
    background-color: rgba(255, 255, 255, 0.4); 
    border-radius: 50%; 
    position: absolute; 
    top: 15%; 
    right: 15%; 
}
        /* --- LIVRO --- */
        .book-container {
            position: relative;
            width: 95vw;
            max-width: 900px;
            height: 65vh;
            background-color: #8b4513;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.4);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }

        .book-pages { width: 100%; height: 100%; background-color: var(--paper-color); display: flex; position: relative; border-radius: 5px; overflow: hidden; box-shadow: inset 0 0 100px rgba(0,0,0,0.2); }
        #ocean-stage { width: 100%; height: 100%; background-image: url('cenario.png'); background-size: cover; background-position: center; position: relative; overflow: hidden; }

        /* --- PERSONAGENS E OBJETOS --- */
        #peixinho { width: 80px; position: absolute; top: 50%; left: 20%; transition: all 2s ease-in-out; z-index: 10; }
        .pais-container { position: absolute; top: 45%; left: -350px; transition: all 2s ease-in-out; display: flex; gap: 15px; z-index: 9; }
        .pai-img { width: 110px; filter: hue-rotate(40deg); } 
        .mae-img { width: 100px; filter: hue-rotate(-40deg); }

        /* A Pedra Iluminada */
        #pedra-magica {
            position: absolute;
            bottom: -20px;
            right: 15%;
            width: 150px;
            height: 100px;
            background: #555;
            border-radius: 50% 50% 20% 20%;
            box-shadow: 0 0 50px rgba(255, 255, 255, 0.8);
            display: none; /* Só aparece na cena 5 */
            z-index: 8;
            background: linear-gradient(135deg, #777, #333);
            animation: glow 2s infinite alternate ease-in-out;
        }

        @keyframes glow {
            from { box-shadow: 0 0 20px rgba(255, 255, 150, 0.4); filter: brightness(1); }
            to { box-shadow: 0 0 60px rgba(255, 255, 200, 0.9); filter: brightness(1.3); }
        }

        /* Narração e Botão */
        #narration-box { width: 85%; max-width: 750px; background: rgba(255, 255, 255, 0.95); padding: 20px; border-radius: 20px; margin-top: 20px; text-align: center; font-size: 1.2rem; box-shadow: 0 5px 15px rgba(0,0,0,0.1); z-index: 30; }
        #next-btn { margin-top: 15px; padding: 12px 35px; font-size: 1.2rem; font-family: 'Bubblegum Sans', cursive; background-color: var(--coral-btn); border: none; border-radius: 50px; color: white; cursor: pointer; box-shadow: 0 5px 0px #e08e9b; z-index: 30; }

    </style>
</head>
<body>

    <div class="wrapper">
        <div><span class="dot"></span></div>
        <div><span class="dot"></span></div>
        <div><span class="dot"></span></div>
        <div><span class="dot"></span></div>
        <div><span class="dot"></span></div>
    </div>

    <div class="book-container">
        <div class="book-pages">
            <div id="ocean-stage">
                <div id="pedra-magica"></div>
                <div id="pais" class="pais-container">
                    <img src="peixinho.png" class="pai-img">
                    <img src="peixinho.png" class="mae-img">
                </div>
                <img id="peixinho" src="peixinho.png">
            </div>
        </div>
    </div>

    <div id="narration-box">No fundo de um mar azul e brilhante vivia Lilo, um pequeno peixinho muito curioso.</div>
    <button id="next-btn" onclick="nextStep()">Avançar ➔</button>

    <script>
        let step = 0;
        const peixinho = document.getElementById('peixinho');
        const pais = document.getElementById('pais');
        const text = document.getElementById('narration-box');
        const stage = document.getElementById('ocean-stage');
        const pedra = document.getElementById('pedra-magica');

        const storySteps = [
            {
                text: "Lilo: Mamãe! Papai! Vamos brincar de corrida?<br>Mamãe: Agora não, querido... Papai: Depois a gente brinca!",
                action: () => { pais.style.left = '40px'; peixinho.style.left = '280px'; pedra.style.display = 'none'; }
            },
            {
                text: "Lilo decidiu explorar sozinho. 'Vou só dar uma voltinha... rapidinho!', pensou ele enquanto nadava entre corais.",
                action: () => { peixinho.style.left = '80%'; pais.style.left = '-350px'; }
            },
            {
                text: "Lilo: Mamãe? Papai? Onde eu estou?<br>O mar parecia enorme e silencioso. Lilo ficou assustado.",
                action: () => { stage.style.filter = "brightness(0.6)"; peixinho.style.left = '50%'; peixinho.style.transform = 'scaleX(-1)'; }
            },
            {
                text: "Mamãe: Você viu o Lilo? Papai: Achei que ele estava com você!<br>Preocupados, os dois saíram pelo oceano buscando ajuda.",
                action: () => { stage.style.filter = "brightness(0.8)"; pais.style.left = '10%'; peixinho.style.left = '120%'; }
            },
            {
                text: "Perto de uma <strong>pedra iluminada</strong>, eles viram uma nadadeira pequena tremendo.<br>Mamãe: Lilo! Lilo: Mamãe! Papai!",
                action: () => { 
                    stage.style.filter = "none";
                    pedra.style.display = 'block'; // A pedra aparece aqui
                    peixinho.style.transform = 'scaleX(1)';
                    peixinho.style.left = '70%'; // Lilo posicionado perto da pedra
                    peixinho.style.top = '60%';
                    // Pequeno efeito de tremor na nadadeira (animação JS rápida)
                    peixinho.animate([{ transform: 'rotate(0deg)' }, { transform: 'rotate(5deg)' }], { duration: 100, iterations: 10 });
                    pais.style.left = '15%';
                }
            },
            {
                text: "Papai: Sempre avise antes. Mamãe: Você é o mais importante!<br>E ali mesmo começou a melhor brincadeira do dia!",
                action: () => { 
                    peixinho.style.left = '45%'; 
                    peixinho.style.top = '45%'; 
                    pais.style.left = '25%'; 
                    peixinho.animate([{ transform: 'translateY(0)' }, { transform: 'translateY(-30px)' }], { duration: 500, iterations: 6 });
                }
            }
        ];

        function nextStep() {
            if(step < storySteps.length) {
                const s = storySteps[step];
                text.innerHTML = s.text;
                s.action();
                step++;
                if(step === storySteps.length) document.getElementById('next-btn').innerText = "Recomeçar ↺";
            } else { location.reload(); }
        }
    </script>
</body>
</html>
